{"version":3,"sources":["webpack:///src/app/@shared/user/user-mutation/user-mutation.component.html","webpack:///src/app/@core/data/geo-location.service.ts","webpack:///src/app/@shared/user/user-mutation/user-mutation.component.scss","webpack:///src/app/@shared/user/user-mutation/user-mutation.component.ts","webpack:///src/app/@shared/user/user-mutation/user-mutation.module.ts"],"names":["GeoLocationService","apollo","geoLocation","watchQuery","query","variables","countryId","city","postcode","streetAddress","house","loc","pollInterval","valueChanges","pipe","res","data","geoLocationProducts","UserMutationComponent","userAuthRouter","toasterService","activeModal","formBuilder","translateService","mapTypeEmitter","mapCoordEmitter","mapGeometryEmitter","BUTTON_DONE","BUTTON_NEXT","BUTTON_PREV","form","group","basicInfo","buildForm","apartment","buildApartmentForm","location","get","coords","emit","geometry","mapType","loading","locationForm","getValue","coordinates","reverse","register","user","basicInfoForm","getApartment","pop","id","close","message","dismiss","key","translationResult","subscribe","_translate","selector","template","UserMutationModule","imports","forChild","exports","declarations","entryComponents"],"mappings":"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","file":"default~app-pages-customers-customers-module~app-pages-simulation-simulation-module-es5.js","sourcesContent":["export default \"<nb-card [nbSpinner]=\\\"loading\\\" class=\\\"user-modal\\\">\\n\\t<div class=\\\"modal-header\\\">\\n\\t\\t<span class=\\\"modal-title\\\">{{\\n\\t\\t\\t'SIMULATION_VIEW.USER_MUTATION.TITLE' | translate\\n\\t\\t}}</span>\\n\\t\\t<button class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"cancel()\\\">\\n\\t\\t\\t<span aria-hidden=\\\"true\\\">&times;</span>\\n\\t\\t</button>\\n\\t</div>\\n\\n\\t<form-wizard\\n\\t\\tclass=\\\"form-horizontal\\\"\\n\\t\\t[formGroup]=\\\"form\\\"\\n\\t\\t[buttonDone]=\\\"buttonDone\\\"\\n\\t\\t[buttonNext]=\\\"buttonNext\\\"\\n\\t\\t[buttonPrevious]=\\\"buttonPrevious\\\"\\n\\t>\\n\\t\\t<wizard-step\\n\\t\\t\\t[title]=\\\"\\n\\t\\t\\t\\t'SIMULATION_VIEW.USER_MUTATION.WIZARD_TITLES.ADDITIONAL_INFO'\\n\\t\\t\\t\\t\\t| translate\\n\\t\\t\\t\\\"\\n\\t\\t\\t[isValid]=\\\"basicInfo.valid\\\"\\n\\t\\t>\\n\\t\\t\\t<br />\\n\\t\\t\\t<ea-user-basic-info-form\\n\\t\\t\\t\\t#basicInfoForm\\n\\t\\t\\t\\t[form]=\\\"basicInfo\\\"\\n\\t\\t\\t\\t[showBasicInfoLabel]=\\\"true\\\"\\n\\t\\t\\t></ea-user-basic-info-form>\\n\\t\\t</wizard-step>\\n\\n\\t\\t<wizard-step\\n\\t\\t\\t[title]=\\\"\\n\\t\\t\\t\\t'SIMULATION_VIEW.USER_MUTATION.WIZARD_TITLES.LOCATION'\\n\\t\\t\\t\\t\\t| translate\\n\\t\\t\\t\\\"\\n\\t\\t\\t(onComplete)=\\\"create()\\\"\\n\\t\\t\\t[isValid]=\\\"location.valid\\\"\\n\\t\\t>\\n\\t\\t\\t<br />\\n\\t\\t\\t<ea-location-form\\n\\t\\t\\t\\t#locationForm\\n\\t\\t\\t\\t[form]=\\\"location\\\"\\n\\t\\t\\t\\t[apartment]=\\\"apartment\\\"\\n\\t\\t\\t\\t[showAutocompleteSearch]=\\\"true\\\"\\n\\t\\t\\t\\t(mapCoordinatesEmitter)=\\\"onCoordinatesChanges($event)\\\"\\n\\t\\t\\t\\t(mapGeometryEmitter)=\\\"onGeometrySend($event)\\\"\\n\\t\\t\\t>\\n\\t\\t\\t</ea-location-form>\\n\\n\\t\\t\\t<google-map\\n\\t\\t\\t\\t[mapCoordEvent]=\\\"mapCoordEmitter\\\"\\n\\t\\t\\t\\t[mapGeometryEvent]=\\\"mapGeometryEmitter\\\"\\n\\t\\t\\t>\\n\\t\\t\\t</google-map>\\n\\t\\t</wizard-step>\\n\\t</form-wizard>\\n</nb-card>\\n\"","import { Injectable } from '@angular/core';\nimport GeoLocation from '@modules/server.common/entities/GeoLocation';\nimport { Apollo } from 'apollo-angular';\nimport ProductInfo from '@modules/server.common/entities/ProductInfo';\nimport { Observable } from 'rxjs';\nimport gql from 'graphql-tag';\nimport { map, share } from 'rxjs/operators';\n\n@Injectable()\nexport class GeoLocationService {\n\tconstructor(private readonly apollo: Apollo) {}\n\n\tgetGeoLocationProducts(\n\t\tgeoLocation: GeoLocation\n\t): Observable<ProductInfo[]> {\n\t\treturn this.apollo\n\t\t\t.watchQuery<{ geoLocationProducts: ProductInfo[] }>({\n\t\t\t\tquery: gql`\n\t\t\t\t\tquery geoLocationProducts(\n\t\t\t\t\t\t$geoLocation: GeoLocationFindInput!\n\t\t\t\t\t) {\n\t\t\t\t\t\tgeoLocationProducts(geoLocation: $geoLocation) {\n\t\t\t\t\t\t\tdistance\n\t\t\t\t\t\t\twarehouseId\n\t\t\t\t\t\t\twarehouseLogo\n\t\t\t\t\t\t\twarehouseProduct {\n\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\tinitialPrice\n\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\tisManufacturing\n\t\t\t\t\t\t\t\tisCarrierRequired\n\t\t\t\t\t\t\t\tisDeliveryRequired\n\t\t\t\t\t\t\t\tdeliveryTimeMin\n\t\t\t\t\t\t\t\tdeliveryTimeMax\n\t\t\t\t\t\t\t\tproduct {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\ttitle {\n\t\t\t\t\t\t\t\t\t\tlocale\n\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdescription {\n\t\t\t\t\t\t\t\t\t\tlocale\n\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdetails {\n\t\t\t\t\t\t\t\t\t\tlocale\n\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\timages {\n\t\t\t\t\t\t\t\t\t\tlocale\n\t\t\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t\t\t\twidth\n\t\t\t\t\t\t\t\t\t\theight\n\t\t\t\t\t\t\t\t\t\torientation\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t\tvariables: {\n\t\t\t\t\tgeoLocation: {\n\t\t\t\t\t\tcountryId: geoLocation.countryId,\n\t\t\t\t\t\tcity: geoLocation.city,\n\t\t\t\t\t\tpostcode: geoLocation.postcode,\n\t\t\t\t\t\tstreetAddress: geoLocation.streetAddress,\n\t\t\t\t\t\thouse: geoLocation.house,\n\t\t\t\t\t\tloc: geoLocation.loc,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tpollInterval: 2000,\n\t\t\t})\n\t\t\t.valueChanges.pipe(\n\t\t\t\tmap((res) => res.data.geoLocationProducts),\n\t\t\t\tshare()\n\t\t\t);\n\t}\n}\n","export default \":host ::ng-deep .card-footer button {\\n  background-color: #111111 !important;\\n  border: none !important;\\n  color: white !important;\\n  cursor: pointer !important;\\n}\\n\\n:host ::ng-deep .card-footer button:hover {\\n  background-color: #bebebe !important;\\n  color: #111111 !important;\\n}\\n\\nnb-card-header ul {\\n  padding-left: 0;\\n}\\n\\ngoogle-map {\\n  margin-top: 25px;\\n}\\n\\n.user-modal {\\n  margin: 0px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9tbnQvZC9Xb3JrL0FuZ3VsYXIvTmV3IGZvbGRlciAoMikvRG9sY2VHcm9jZXJ5L3BhY2thZ2VzL2FkbWluLXdlYi1hbmd1bGFyL3NyYy9hcHAvQHNoYXJlZC91c2VyL3VzZXItbXV0YXRpb24vdXNlci1tdXRhdGlvbi5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvQHNoYXJlZC91c2VyL3VzZXItbXV0YXRpb24vdXNlci1tdXRhdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNDLG9DQUFvQztFQUNwQyx1QkFBdUI7RUFDdkIsdUJBQXVCO0VBQ3ZCLDBCQUEwQjtBQ0MzQjs7QURFQTtFQUNDLG9DQUFvQztFQUNwQyx5QkFBeUI7QUNDMUI7O0FERUE7RUFDQyxlQUFlO0FDQ2hCOztBREVBO0VBQ0MsZ0JBQWdCO0FDQ2pCOztBREVBO0VBQ0MsV0FBVztBQ0NaIiwiZmlsZSI6InNyYy9hcHAvQHNoYXJlZC91c2VyL3VzZXItbXV0YXRpb24vdXNlci1tdXRhdGlvbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IDo6bmctZGVlcCAuY2FyZC1mb290ZXIgYnV0dG9uIHtcblx0YmFja2dyb3VuZC1jb2xvcjogIzExMTExMSAhaW1wb3J0YW50O1xuXHRib3JkZXI6IG5vbmUgIWltcG9ydGFudDtcblx0Y29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG5cdGN1cnNvcjogcG9pbnRlciAhaW1wb3J0YW50O1xufVxuXG46aG9zdCA6Om5nLWRlZXAgLmNhcmQtZm9vdGVyIGJ1dHRvbjpob3ZlciB7XG5cdGJhY2tncm91bmQtY29sb3I6ICNiZWJlYmUgIWltcG9ydGFudDtcblx0Y29sb3I6ICMxMTExMTEgIWltcG9ydGFudDtcbn1cblxubmItY2FyZC1oZWFkZXIgdWwge1xuXHRwYWRkaW5nLWxlZnQ6IDA7XG59XG5cbmdvb2dsZS1tYXAge1xuXHRtYXJnaW4tdG9wOiAyNXB4O1xufVxuXG4udXNlci1tb2RhbCB7XG5cdG1hcmdpbjogMHB4O1xufVxuIiwiOmhvc3QgOjpuZy1kZWVwIC5jYXJkLWZvb3RlciBidXR0b24ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTExMTExICFpbXBvcnRhbnQ7XG4gIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgY3Vyc29yOiBwb2ludGVyICFpbXBvcnRhbnQ7XG59XG5cbjpob3N0IDo6bmctZGVlcCAuY2FyZC1mb290ZXIgYnV0dG9uOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2JlYmViZSAhaW1wb3J0YW50O1xuICBjb2xvcjogIzExMTExMSAhaW1wb3J0YW50O1xufVxuXG5uYi1jYXJkLWhlYWRlciB1bCB7XG4gIHBhZGRpbmctbGVmdDogMDtcbn1cblxuZ29vZ2xlLW1hcCB7XG4gIG1hcmdpbi10b3A6IDI1cHg7XG59XG5cbi51c2VyLW1vZGFsIHtcbiAgbWFyZ2luOiAwcHg7XG59XG4iXX0= */\"","import { Component, ViewChild, EventEmitter } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ToasterService } from 'angular2-toaster';\nimport { BasicInfoFormComponent } from '../forms/basic-info';\nimport { LocationFormComponent } from '../../forms/location';\nimport { UserAuthRouter } from '@modules/client.common.angular2/routers/user-auth-router.service';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n\tselector: 'ea-user-mutation',\n\ttemplateUrl: './user-mutation.component.html',\n\tstyleUrls: ['/user-mutation.component.scss'],\n})\nexport class UserMutationComponent {\n\t@ViewChild('basicInfoForm')\n\tbasicInfoForm: BasicInfoFormComponent;\n\n\t@ViewChild('locationForm')\n\tlocationForm: LocationFormComponent;\n\n\tmapTypeEmitter = new EventEmitter<string>();\n\tmapCoordEmitter = new EventEmitter<number[]>();\n\tmapGeometryEmitter = new EventEmitter<any>();\n\n\tpublic BUTTON_DONE: string = 'BUTTON_DONE';\n\tpublic BUTTON_NEXT: string = 'BUTTON_NEXT';\n\tpublic BUTTON_PREV: string = 'BUTTON_PREV';\n\n\treadonly form: FormGroup = this.formBuilder.group({\n\t\tbasicInfo: BasicInfoFormComponent.buildForm(this.formBuilder),\n\t\tapartment: LocationFormComponent.buildApartmentForm(this.formBuilder),\n\t\tlocation: LocationFormComponent.buildForm(this.formBuilder),\n\t});\n\n\treadonly basicInfo = this.form.get('basicInfo') as FormControl;\n\treadonly apartment = this.form.get('apartment') as FormControl;\n\treadonly location = this.form.get('location') as FormControl;\n\n\tpublic loading: boolean;\n\n\tconstructor(\n\t\tprotected readonly userAuthRouter: UserAuthRouter,\n\t\tprivate readonly toasterService: ToasterService,\n\t\tprivate readonly activeModal: NgbActiveModal,\n\t\tprivate readonly formBuilder: FormBuilder,\n\t\tprivate readonly translateService: TranslateService\n\t) {}\n\n\tget buttonDone() {\n\t\treturn this._translate(this.BUTTON_DONE);\n\t}\n\n\tget buttonNext() {\n\t\treturn this._translate(this.BUTTON_NEXT);\n\t}\n\n\tget buttonPrevious() {\n\t\treturn this._translate(this.BUTTON_PREV);\n\t}\n\n\tonCoordinatesChanges(coords: number[]) {\n\t\tthis.mapCoordEmitter.emit(coords);\n\t}\n\n\tonGeometrySend(geometry: any) {\n\t\tthis.mapGeometryEmitter.emit(geometry);\n\t}\n\n\temitMapType(mapType: string) {\n\t\tthis.mapTypeEmitter.emit(mapType);\n\t}\n\n\tasync create() {\n\t\ttry {\n\t\t\tthis.loading = true;\n\n\t\t\t// GeoJSON in MongoDB save coordinates lng-lat, but locationForm return lat-lng for that we reverse them\n\t\t\tconst location = this.locationForm.getValue();\n\t\t\tlocation.loc.coordinates.reverse();\n\n\t\t\tconst user = await this.userAuthRouter.register({\n\t\t\t\tuser: {\n\t\t\t\t\t...this.basicInfoForm.getValue(),\n\t\t\t\t\tgeoLocation: location,\n\t\t\t\t\tapartment: this.locationForm.getApartment(),\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.loading = false;\n\t\t\tthis.toasterService.pop(\n\t\t\t\t'success',\n\t\t\t\t`Customer with '${user.id}' was added`\n\t\t\t);\n\t\t\tthis.activeModal.close(user);\n\t\t} catch (err) {\n\t\t\tthis.loading = false;\n\t\t\tthis.toasterService.pop(\n\t\t\t\t'error',\n\t\t\t\t`Error in creating customer: \"${err.message}\"`\n\t\t\t);\n\t\t}\n\t}\n\n\tcancel() {\n\t\tthis.activeModal.dismiss('canceled');\n\t}\n\n\tprivate _translate(key: string): string {\n\t\tlet translationResult = '';\n\n\t\tthis.translateService.get(key).subscribe((res) => {\n\t\t\ttranslationResult = res;\n\t\t});\n\n\t\treturn translationResult;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { UserMutationComponent } from './user-mutation.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormWizardModule } from 'angular2-wizard';\nimport { ThemeModule } from '../../../@theme/theme.module';\nimport { UserFormsModule } from '../forms';\nimport { LocationFormModule } from '../../forms/location';\nimport { GoogleMapModule } from '../../forms/google-map/google-map.module';\nimport { NbSpinnerModule } from '@nebular/theme';\n\n@NgModule({\n\timports: [\n\t\tThemeModule,\n\t\tFormWizardModule,\n\t\tTranslateModule.forChild(),\n\t\tUserFormsModule,\n\t\tLocationFormModule,\n\t\tGoogleMapModule,\n\t\tNbSpinnerModule,\n\t],\n\texports: [UserMutationComponent],\n\tdeclarations: [UserMutationComponent],\n\tentryComponents: [UserMutationComponent],\n})\nexport class UserMutationModule {}\n"]}