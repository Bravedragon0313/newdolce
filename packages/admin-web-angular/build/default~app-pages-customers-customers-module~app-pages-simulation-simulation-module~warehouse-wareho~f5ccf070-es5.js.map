{"version":3,"sources":["webpack:///src/app/@shared/user/forms/basic-info/basic-info-form.component.html","webpack:///mnt/d/Work/Angular/New folder (2)/DolceGrocery/node_modules/rxjs-compat/_esm2015/add/operator/debounceTime.js","webpack:///mnt/d/Work/Angular/New folder (2)/DolceGrocery/node_modules/rxjs-compat/_esm2015/operator/debounceTime.js","webpack:///src/app/@shared/user/forms/basic-info/basic-info-form.component.scss","webpack:///src/app/@shared/user/forms/basic-info/basic-info-form.component.ts","webpack:///src/app/@shared/user/forms/user-forms.module.ts"],"names":["prototype","debounceTime","dueTime","scheduler","BasicInfoFormComponent","translateService","_usersService","_route","showBasicInfoLabel","_ngDestroy$","customerId","snapshot","paramMap","get","initialize","getUploaderPlaceholderText","_setupUserLogoUrlValidation","basicInfo","form","getRawValue","firstName","lastName","image","email","deepMark","setValue","next","complete","destroy","logoImagePreview","nativeElement","onload","showLogoMeta","setErrors","onerror","invalidUrl","pipe","toPromise","uploaderPlaceholder","value","usersService","_customerId","formBuilder","emailSearch$","isSearchRdy","group","control","ctrlEmail","subscribe","isUserExists","exceptCustomerId","memberKey","memberValue","hasExistedEmail","emailTaken","length","selector","template","UserFormsModule","imports","forChild","exports","declarations","providers"],"mappings":"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","file":"default~app-pages-customers-customers-module~app-pages-simulation-simulation-module~warehouse-wareho~f5ccf070-es5.js","sourcesContent":["export default \"<div class=\\\"col-sm-12\\\" [formGroup]=\\\"form\\\" *ngIf=\\\"form\\\">\\n\\t<br />\\n\\n\\t<fieldset>\\n\\t\\t<div class=\\\"form-group row\\\">\\n\\t\\t\\t<label class=\\\"col-sm-2 control-label\\\">\\n\\t\\t\\t\\t<span *ngIf=\\\"showBasicInfoLabel\\\">{{\\n\\t\\t\\t\\t\\t'SHARED.USER.FORMS.BASIC_INFO.TITLE' | translate\\n\\t\\t\\t\\t}}</span>\\n\\t\\t\\t</label>\\n\\n\\t\\t\\t<div class=\\\"col-sm-5\\\">\\n\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\tclass=\\\"form-control\\\"\\n\\t\\t\\t\\t\\tplaceholder=\\\"{{\\n\\t\\t\\t\\t\\t\\t'SHARED.USER.FORMS.BASIC_INFO.FIRST_NAME_OPTIONAL'\\n\\t\\t\\t\\t\\t\\t\\t| translate\\n\\t\\t\\t\\t\\t}}\\\"\\n\\t\\t\\t\\t\\tformControlName=\\\"firstName\\\"\\n\\t\\t\\t\\t/>\\n\\t\\t\\t</div>\\n\\n\\t\\t\\t<div class=\\\"col-sm-5\\\">\\n\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\tclass=\\\"form-control\\\"\\n\\t\\t\\t\\t\\tplaceholder=\\\"{{\\n\\t\\t\\t\\t\\t\\t'SHARED.USER.FORMS.BASIC_INFO.LAST_NAME_OPTIONAL'\\n\\t\\t\\t\\t\\t\\t\\t| translate\\n\\t\\t\\t\\t\\t}}\\\"\\n\\t\\t\\t\\t\\tformControlName=\\\"lastName\\\"\\n\\t\\t\\t\\t/>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\n\\t\\t<div class=\\\"form-group row\\\">\\n\\t\\t\\t<label class=\\\"col-sm-2 control-label\\\">{{\\n\\t\\t\\t\\t'SHARED.USER.FORMS.BASIC_INFO.EMAIL' | translate\\n\\t\\t\\t}}</label>\\n\\n\\t\\t\\t<div class=\\\"col-sm-10\\\">\\n\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\tclass=\\\"form-control\\\"\\n\\t\\t\\t\\t\\tplaceholder=\\\"{{\\n\\t\\t\\t\\t\\t\\t'SHARED.USER.FORMS.BASIC_INFO.EMAIL_OPTIONAL'\\n\\t\\t\\t\\t\\t\\t\\t| translate\\n\\t\\t\\t\\t\\t}}\\\"\\n\\t\\t\\t\\t\\tformControlName=\\\"email\\\"\\n\\t\\t\\t\\t/>\\n\\n\\t\\t\\t\\t<div\\n\\t\\t\\t\\t\\t*ngIf=\\\"email.errors && (email.dirty || email.touched)\\\"\\n\\t\\t\\t\\t\\tclass=\\\"alert alert-danger\\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<div [hidden]=\\\"!email.hasError('email')\\\">\\n\\t\\t\\t\\t\\t\\t{{\\n\\t\\t\\t\\t\\t\\t\\t'SHARED.USER.FORMS.BASIC_INFO.ERRORS.INVALID_EMAIL'\\n\\t\\t\\t\\t\\t\\t\\t\\t| translate\\n\\t\\t\\t\\t\\t\\t}}!\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div [hidden]=\\\"!email.hasError('emailTaken')\\\">\\n\\t\\t\\t\\t\\t\\t{{\\n\\t\\t\\t\\t\\t\\t\\t'SHARED.USER.FORMS.BASIC_INFO.ERRORS.EMAIL_IS_ALREADY_IN_USE'\\n\\t\\t\\t\\t\\t\\t\\t\\t| translate\\n\\t\\t\\t\\t\\t\\t}}!\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\n\\t\\t<div class=\\\"form-group row\\\">\\n\\t\\t\\t<label class=\\\"col-sm-2 control-label\\\">\\n\\t\\t\\t\\t{{ 'SHARED.USER.FORMS.BASIC_INFO.PHOTO_URL' | translate }}\\n\\t\\t\\t</label>\\n\\n\\t\\t\\t<div class=\\\"col-sm-10\\\">\\n\\t\\t\\t\\t<e-cu-file-uploader\\n\\t\\t\\t\\t\\t[placeholder]=\\\"uploaderPlaceholder\\\"\\n\\t\\t\\t\\t\\t[name]=\\\"firstName?.value\\\"\\n\\t\\t\\t\\t\\t[fileUrl]=\\\"image?.value\\\"\\n\\t\\t\\t\\t\\t(uploadedImgUrl)=\\\"image.setValue($event)\\\"\\n\\t\\t\\t\\t></e-cu-file-uploader>\\n\\t\\t\\t\\t<div *ngIf=\\\"image.invalid\\\" class=\\\"alert alert-danger\\\">\\n\\t\\t\\t\\t\\t{{ 'SHARED.FORMS.ERRORS.LOGO_URL_REQUIRED' | translate }}!\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\n\\t\\t<div class=\\\"form-group row\\\" [hidden]=\\\"image.invalid\\\">\\n\\t\\t\\t<label class=\\\"col-sm-2 control-label\\\"></label>\\n\\t\\t\\t<div class=\\\"col-sm-10\\\">\\n\\t\\t\\t\\t<div class=\\\"row preview-img\\\">\\n\\t\\t\\t\\t\\t<div\\n\\t\\t\\t\\t\\t\\t[hidden]=\\\"!showLogoMeta\\\"\\n\\t\\t\\t\\t\\t\\tclass=\\\"remove-icon\\\"\\n\\t\\t\\t\\t\\t\\t(click)=\\\"deleteImg()\\\"\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<img\\n\\t\\t\\t\\t\\t\\t\\t#logoImagePreview\\n\\t\\t\\t\\t\\t\\t\\tsrc=\\\"{{ image.value }}\\\"\\n\\t\\t\\t\\t\\t\\t\\talt=\\\"Invalid image\\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\\"img-rounded\\\"\\n\\t\\t\\t\\t\\t\\t/>\\n\\n\\t\\t\\t\\t\\t\\t<span\\n\\t\\t\\t\\t\\t\\t\\tclass=\\\"ion-md-remove-circle text-danger pl-2\\\"\\n\\t\\t\\t\\t\\t\\t\\ttitle=\\\"Remove\\\"\\n\\t\\t\\t\\t\\t\\t></span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</fieldset>\\n</div>\\n\"","import { Observable } from 'rxjs';\nimport { debounceTime } from '../../operator/debounceTime';\nObservable.prototype.debounceTime = debounceTime;\n//# sourceMappingURL=debounceTime.js.map","import { asyncScheduler } from 'rxjs';\nimport { debounceTime as higherOrder } from 'rxjs/operators';\nexport function debounceTime(dueTime, scheduler = asyncScheduler) {\n    return higherOrder(dueTime, scheduler)(this);\n}\n//# sourceMappingURL=debounceTime.js.map","export default \".preview-img {\\n  padding-left: 14px;\\n  padding-right: 16px;\\n}\\n\\n.img-rounded {\\n  max-height: 70px;\\n}\\n\\n.remove-icon {\\n  cursor: pointer;\\n}\\n\\n.remove-icon span {\\n  position: absolute;\\n  font-size: 1.1em;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9tbnQvZC9Xb3JrL0FuZ3VsYXIvTmV3IGZvbGRlciAoMikvRG9sY2VHcm9jZXJ5L3BhY2thZ2VzL2FkbWluLXdlYi1hbmd1bGFyL3NyYy9hcHAvQHNoYXJlZC91c2VyL2Zvcm1zL2Jhc2ljLWluZm8vYmFzaWMtaW5mby1mb3JtLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9Ac2hhcmVkL3VzZXIvZm9ybXMvYmFzaWMtaW5mby9iYXNpYy1pbmZvLWZvcm0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxrQkFBa0I7RUFDbEIsbUJBQW1CO0FDQ3BCOztBREVBO0VBQ0MsZ0JBQWdCO0FDQ2pCOztBREVBO0VBQ0MsZUFBZTtBQ0NoQjs7QURGQTtFQUlFLGtCQUFrQjtFQUNsQixnQkFBZ0I7QUNFbEIiLCJmaWxlIjoic3JjL2FwcC9Ac2hhcmVkL3VzZXIvZm9ybXMvYmFzaWMtaW5mby9iYXNpYy1pbmZvLWZvcm0uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucHJldmlldy1pbWcge1xuXHRwYWRkaW5nLWxlZnQ6IDE0cHg7XG5cdHBhZGRpbmctcmlnaHQ6IDE2cHg7XG59XG5cbi5pbWctcm91bmRlZCB7XG5cdG1heC1oZWlnaHQ6IDcwcHg7XG59XG5cbi5yZW1vdmUtaWNvbiB7XG5cdGN1cnNvcjogcG9pbnRlcjtcblxuXHRzcGFuIHtcblx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XG5cdFx0Zm9udC1zaXplOiAxLjFlbTtcblx0fVxufVxuIiwiLnByZXZpZXctaW1nIHtcbiAgcGFkZGluZy1sZWZ0OiAxNHB4O1xuICBwYWRkaW5nLXJpZ2h0OiAxNnB4O1xufVxuXG4uaW1nLXJvdW5kZWQge1xuICBtYXgtaGVpZ2h0OiA3MHB4O1xufVxuXG4ucmVtb3ZlLWljb24ge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5yZW1vdmUtaWNvbiBzcGFuIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBmb250LXNpemU6IDEuMWVtO1xufVxuIl19 */\"","import {\n\tComponent,\n\tInput,\n\tOnDestroy,\n\tViewChild,\n\tElementRef,\n\tAfterViewInit,\n\tOnInit,\n} from '@angular/core';\nimport {\n\tFormBuilder,\n\tFormGroup,\n\tValidators,\n\tFormControl,\n\tAbstractControl,\n} from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { IUserCreateObject } from '@modules/server.common/interfaces/IUser';\nimport { UsersService } from '../../../../@core/data/users.service';\nimport { FormHelpers } from '../../../forms/helpers';\nimport { ActivatedRoute } from '@angular/router';\nimport 'rxjs/add/operator/debounceTime';\nimport { TranslateService } from '@ngx-translate/core';\nimport { first, takeUntil } from 'rxjs/operators';\n\nexport type CustomerBasicInfo = Pick<\n\tIUserCreateObject,\n\t'firstName' | 'lastName' | 'email' | 'image'\n>;\n\n@Component({\n\tselector: 'ea-user-basic-info-form',\n\tstyleUrls: ['./basic-info-form.component.scss'],\n\ttemplateUrl: 'basic-info-form.component.html',\n})\nexport class BasicInfoFormComponent\n\timplements OnInit, OnDestroy, AfterViewInit {\n\t@ViewChild('logoImagePreview')\n\tlogoImagePreview: ElementRef;\n\n\t@Input()\n\treadonly form: FormGroup;\n\t@Input()\n\tshowBasicInfoLabel: boolean = false;\n\n\tuploaderPlaceholder: string;\n\n\tprivate _ngDestroy$ = new Subject<void>();\n\tprivate static _usersService: UsersService;\n\tprivate static _customerId: string;\n\n\tconstructor(\n\t\tprivate translateService: TranslateService,\n\t\tprivate readonly _usersService: UsersService,\n\t\tprivate readonly _route: ActivatedRoute\n\t) {\n\t\tconst customerId = this._route.snapshot.paramMap.get('id');\n\t\tBasicInfoFormComponent.initialize(this._usersService, customerId);\n\t}\n\n\tngOnInit(): void {\n\t\tthis.getUploaderPlaceholderText();\n\t}\n\n\tngAfterViewInit() {\n\t\tthis._setupUserLogoUrlValidation();\n\t}\n\n\tget firstName() {\n\t\treturn this.form.get('firstName');\n\t}\n\n\tget lastName() {\n\t\treturn this.form.get('lastName');\n\t}\n\n\tget image() {\n\t\treturn this.form.get('image');\n\t}\n\tget showLogoMeta() {\n\t\treturn this.image && this.image.value !== '';\n\t}\n\n\tget email() {\n\t\treturn this.form.get('email');\n\t}\n\n\tstatic initialize(usersService: UsersService, customerId: string) {\n\t\tthis._usersService = usersService;\n\t\tthis._customerId = customerId;\n\t}\n\n\tstatic destroy() {\n\t\tBasicInfoFormComponent._usersService = null;\n\t\tBasicInfoFormComponent._customerId = null;\n\t}\n\n\tstatic buildForm(formBuilder: FormBuilder): FormGroup {\n\t\tconst emailSearch$ = new Subject();\n\t\tlet isSearchRdy = false;\n\n\t\treturn formBuilder.group({\n\t\t\tfirstName: [''],\n\t\t\tlastName: [''],\n\t\t\timage: [''],\n\t\t\temail: [\n\t\t\t\t'',\n\t\t\t\t[\n\t\t\t\t\t(control: AbstractControl) =>\n\t\t\t\t\t\tcontrol.value ? Validators.email(control) : null,\n\t\t\t\t],\n\t\t\t\tasync (ctrlEmail: FormControl) => {\n\t\t\t\t\tif (!isSearchRdy) {\n\t\t\t\t\t\temailSearch$.debounceTime(500).subscribe(async () => {\n\t\t\t\t\t\t\tconst hasExistedEmail = await this._usersService\n\t\t\t\t\t\t\t\t.isUserExists({\n\t\t\t\t\t\t\t\t\texceptCustomerId: this._customerId,\n\t\t\t\t\t\t\t\t\tmemberKey: 'email',\n\t\t\t\t\t\t\t\t\tmemberValue: ctrlEmail.value,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.toPromise();\n\n\t\t\t\t\t\t\tif (hasExistedEmail) {\n\t\t\t\t\t\t\t\tctrlEmail.setErrors({ emailTaken: true });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tisSearchRdy = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tisSearchRdy &&\n\t\t\t\t\t\tctrlEmail.value &&\n\t\t\t\t\t\tctrlEmail.value.length > 0\n\t\t\t\t\t) {\n\t\t\t\t\t\temailSearch$.next();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\tgetValue(): CustomerBasicInfo {\n\t\tconst basicInfo = this.form.getRawValue() as {\n\t\t\tfirstName: string;\n\t\t\tlastName: string;\n\t\t\timage: string;\n\t\t\temail: string;\n\t\t};\n\n\t\treturn {\n\t\t\t...(basicInfo.firstName ? { firstName: basicInfo.firstName } : {}),\n\t\t\t...(basicInfo.lastName ? { lastName: basicInfo.lastName } : {}),\n\t\t\t...(basicInfo.image ? { image: basicInfo.image } : {}),\n\t\t\t...(basicInfo.email ? { email: basicInfo.email } : {}),\n\t\t};\n\t}\n\n\tsetValue<T extends CustomerBasicInfo>(basicInfo: T) {\n\t\tFormHelpers.deepMark(this.form, 'dirty');\n\n\t\tthis.form.setValue({\n\t\t\tfirstName: basicInfo.firstName ? basicInfo.firstName : '',\n\t\t\tlastName: basicInfo.lastName ? basicInfo.lastName : '',\n\t\t\timage: basicInfo.image ? basicInfo.image : '',\n\t\t\temail: basicInfo.email ? basicInfo.email : '',\n\t\t});\n\t}\n\n\tdeleteImg() {\n\t\tthis.image.setValue('');\n\t}\n\n\tngOnDestroy() {\n\t\tthis._ngDestroy$.next();\n\t\tthis._ngDestroy$.complete();\n\t\tBasicInfoFormComponent.destroy();\n\t}\n\n\tprivate _setupUserLogoUrlValidation() {\n\t\tthis.logoImagePreview.nativeElement.onload = () => {\n\t\t\tif (this.showLogoMeta) {\n\t\t\t\tthis.image.setErrors(null);\n\t\t\t}\n\t\t};\n\n\t\tthis.logoImagePreview.nativeElement.onerror = () => {\n\t\t\tif (this.showLogoMeta) {\n\t\t\t\tthis.image.setErrors({ invalidUrl: true });\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate async getUploaderPlaceholderText() {\n\t\tthis.uploaderPlaceholder = await this.translateService\n\t\t\t.get('SHARED.USER.FORMS.BASIC_INFO.PICTURE_URL')\n\t\t\t.pipe(first())\n\t\t\t.toPromise();\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormWizardModule } from 'angular2-wizard';\nimport { ThemeModule } from '../../../@theme/theme.module';\nimport { BasicInfoFormComponent } from './basic-info';\nimport { FileUploaderModule } from '@app/@shared/file-uploader/file-uploader.module';\n\n@NgModule({\n\timports: [\n\t\tThemeModule,\n\t\tFormWizardModule,\n\t\tFileUploaderModule,\n\t\tTranslateModule.forChild(),\n\t],\n\texports: [BasicInfoFormComponent],\n\tdeclarations: [BasicInfoFormComponent],\n\tproviders: [],\n})\nexport class UserFormsModule {}\n"]}