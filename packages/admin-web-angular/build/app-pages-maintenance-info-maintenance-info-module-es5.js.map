{"version":3,"sources":["webpack:///src/app/pages/+maintenance-info/maintenance-info.component.html","webpack:///src/app/pages/+maintenance-info/maintenance-info.component.ts","webpack:///src/app/pages/+maintenance-info/maintenance-info.module.ts"],"names":["MaintenanceInfoComponent","maintenanceService","router","store","maintenanceMode","getMessage","getStatus","message","interval","setInterval","status","console","warn","clearInterval","clearMaintenanceMode","navigate","template","routes","path","component","MaintenanceInfoModule","imports","forChild","providers","declarations"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACSf,QAAaA,wBAAwB;AAIpC,wCACSC,kBADT,EAESC,MAFT,EAGSC,KAHT,EAGqB;AAAA;;AAFZ,aAAAF,kBAAA,GAAAA,kBAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACA,aAAAC,KAAA,GAAAA,KAAA;AAER,aAAKC,eAAL,GAAuB,KAAKD,KAAL,CAAWC,eAAlC;AACA,aAAKC,UAAL;AACA,aAAKC,SAAL;AACA;;AAZmC;AAAA;AAAA,qCAcjB;;;;;;;AACH,2BAAM,KAAKL,kBAAL,CAAwBI,UAAxB,CACpB,KAAKD,eADe,EAEpB,qEAAY,8BAAZ,CAFoB,CAAN;;;AAAf,yBAAKG,O;;;;;;;;;AAIL;AAnBmC;AAAA;AAAA,oCAqBV;;;;;;;;;AACnBC,4B,GAAWC,WAAW,CAAC;AAAA,6BAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACzB,uCAAM,KAAKR,kBAAL,CAAwBK,SAAxB,CACpB,qEAAY,mBAAZ,CADoB,EAEpB,qEAAY,8BAAZ,CAFoB,CAAN;;AADyB;AAClCI,sCADkC;AAKxCC,uCAAO,CAACC,IAAR,2BAAgC,KAAKR,eAArC,gBAA0DM,MAA1D;;AAEA,oCAAI,CAACA,MAAL,EAAa;AACZG,+CAAa,CAACL,QAAD,CAAb;AACA,uCAAKL,KAAL,CAAWW,oBAAX;AACA,uCAAKZ,MAAL,CAAYa,QAAZ,CAAqB,CAAC,EAAD,CAArB;AACA;;AAXuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAZ;AAAA,qBAAD,EAYzB,IAZyB,C;;;;;;;;;AAa5B;AAnCmC;;AAAA;AAAA,OAArC;;;;cAK8B;;cACZ;;cACD;;;;AAPJf,4BAAwB,6DAHpC,gEAAU;AACVgB,cAAQ,EAAR;AAAA;AAAA;AADU,KAAV,CAGoC,E,+EAKP,+G,EACZ,sD,EACD,kE,EAPoB,GAAxBhB,wBAAwB,CAAxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAb,QAAMiB,MAAM,GAAW,CACtB;AACCC,UAAI,EAAE,EADP;AAECC,eAAS,EAAE;AAFZ,KADsB,CAAvB;;AAiBA,QAAaC,qBAAqB;AAAA;AAAA,KAAlC;;AAAaA,yBAAqB,6DAVjC,+DAAS;AACTC,aAAO,EAAE,CACR,4DADQ,EAER,6DAAaC,QAAb,CAAsBL,MAAtB,CAFQ,EAGR,8FAHQ,EAIR,sDAJQ,CADA;AAOTM,eAAS,EAAE,CAAC,+GAAD,CAPF;AAQTC,kBAAY,EAAE,CAAC,oFAAD;AARL,KAAT,CAUiC,GAArBJ,qBAAqB,CAArB","file":"app-pages-maintenance-info-maintenance-info-module-es5.js","sourcesContent":["export default \"<nb-layout>\\n\\t<nb-layout-column\\n\\t\\t*ngIf=\\\"message\\\"\\n\\t\\tclass=\\\"maintenance-message-container\\\"\\n\\t\\t[innerHTML]=\\\"message | safe: 'html'\\\"\\n\\t>\\n\\t</nb-layout-column>\\n</nb-layout>\\n\"","import { Component, OnDestroy } from '@angular/core';\nimport { MaintenanceService } from '@modules/client.common.angular2/services/maintenance.service';\nimport { environment } from 'environments/environment';\nimport { Router } from '@angular/router';\nimport { Store } from '@app/@core/data/store.service';\n\n@Component({\n\ttemplateUrl: './maintenance-info.component.html',\n})\nexport class MaintenanceInfoComponent {\n\tpublic message: string;\n\tprivate maintenanceMode: string;\n\n\tconstructor(\n\t\tprivate maintenanceService: MaintenanceService,\n\t\tprivate router: Router,\n\t\tprivate store: Store\n\t) {\n\t\tthis.maintenanceMode = this.store.maintenanceMode;\n\t\tthis.getMessage();\n\t\tthis.getStatus();\n\t}\n\n\tasync getMessage() {\n\t\tthis.message = await this.maintenanceService.getMessage(\n\t\t\tthis.maintenanceMode,\n\t\t\tenvironment['SETTINGS_MAINTENANCE_API_URL']\n\t\t);\n\t}\n\n\tprivate async getStatus() {\n\t\tconst interval = setInterval(async () => {\n\t\t\tconst status = await this.maintenanceService.getStatus(\n\t\t\t\tenvironment['SETTINGS_APP_TYPE'],\n\t\t\t\tenvironment['SETTINGS_MAINTENANCE_API_URL']\n\t\t\t);\n\t\t\tconsole.warn(`Maintenance on '${this.maintenanceMode}': ${status}`);\n\n\t\t\tif (!status) {\n\t\t\t\tclearInterval(interval);\n\t\t\t\tthis.store.clearMaintenanceMode();\n\t\t\t\tthis.router.navigate(['']);\n\t\t\t}\n\t\t}, 5000);\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MaintenanceService } from '@modules/client.common.angular2/services/maintenance.service';\nimport { MaintenanceInfoComponent } from './maintenance-info.component';\nimport { PipesModule } from '@modules/client.common.angular2/pipes/pipes.module';\nimport { ThemeModule } from '@app/@theme';\n\nconst routes: Routes = [\n\t{\n\t\tpath: '',\n\t\tcomponent: MaintenanceInfoComponent,\n\t},\n];\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tRouterModule.forChild(routes),\n\t\tPipesModule,\n\t\tThemeModule,\n\t],\n\tproviders: [MaintenanceService],\n\tdeclarations: [MaintenanceInfoComponent],\n})\nexport class MaintenanceInfoModule {}\n"]}