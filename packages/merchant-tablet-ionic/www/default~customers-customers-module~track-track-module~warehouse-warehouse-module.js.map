{"version":3,"sources":["./src/services/warehouse-orders.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAA2C;AACH;AACV;AAIO;AAIrC;IAqBC,gCAA6B,OAAe;QAAf,YAAO,GAAP,OAAO,CAAQ;QApB3B,2BAAsB,GAAG,kDAAG,+zBAkB5C,KAAC;IAE6C,CAAC;IAEhD,4CAAW,GAAX,UAAY,WAA8B;QACzC,OAAO,IAAI,CAAC,OAAO;aACjB,MAAM,CAAC;YACP,QAAQ,EAAE,IAAI,CAAC,sBAAsB;YACrC,SAAS,EAAE,EAAE,WAAW,eAAE;SAC1B,CAAC;aACD,IAAI,CAAC,0DAAG,CAAC,UAAC,MAAW,IAAK,aAAM,CAAC,IAAI,CAAC,WAAW,EAAvB,CAAuB,CAAC,CAAC,CAAC;IACvD,CAAC;IAED,wDAAuB,GAAvB,UACC,OAAe,EACf,aAA8B,EAC9B,MAAe;QAEf,OAAO,IAAI,CAAC,OAAO;aACjB,UAAU,CAAC;YACX,KAAK,EAAE,kDAAG,+3LA4GT;YACD,YAAY,EAAE,IAAI;YAClB,SAAS,EAAE,EAAE,OAAO,WAAE,aAAa,iBAAE,MAAM,UAAE;SAC7C,CAAC;aACD,YAAY,CAAC,IAAI,CACjB,0DAAG,CAAC,UAAC,GAAG,IAAK,UAAG,CAAC,IAAI,CAAC,yBAAyB,CAAC,EAAnC,CAAmC,CAAC,CACjD,CAAC;IACJ,CAAC;IAEK,sDAAqB,GAA3B,UAA4B,OAAe,EAAE,MAAe;;;;;4BAC/C,WAAM,IAAI,CAAC,OAAO;6BAC5B,KAAK,CAAC;4BACN,KAAK,EAAE,kDAAG,inBAUT;4BACD,SAAS,EAAE,EAAE,OAAO,WAAE,MAAM,UAAE;yBAC9B,CAAC;6BACD,SAAS,EAAE;;wBAfP,GAAG,GAAG,SAeC;wBAEb,WAAO,GAAG,CAAC,IAAI,CAAC,uBAAuB,CAAC,EAAC;;;;KACzC;IAEK,iDAAgB,GAAtB,UAAuB,OAAe,EAAE,MAAc;;;;;4BACzC,WAAM,IAAI,CAAC,OAAO;6BAC5B,KAAK,CAAC;4BACN,KAAK,EAAE,kDAAG,moBAUT;4BACD,SAAS,EAAE,EAAE,OAAO,WAAE,MAAM,UAAE;yBAC9B,CAAC;6BACD,SAAS,EAAE;;wBAfP,GAAG,GAAG,SAeC;wBAEb,WAAO,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAC;;;;KACpC;IAEK,oDAAmB,GAAzB,UAA0B,OAAe;;;;;4BAC5B,WAAM,IAAI,CAAC,OAAO;6BAC5B,KAAK,CAAC;4BACN,KAAK,EAAE,kDAAG,+mCAoBT;4BACD,SAAS,EAAE,EAAE,OAAO,WAAE;yBACtB,CAAC;6BACD,SAAS,EAAE;;wBAzBP,GAAG,GAAG,SAyBC;wBAEb,WAAO,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAAC;;;;KACvC;;gBA9MqC,qDAAM;;IArBhC,sBAAsB;QADlC,gEAAU,EAAE;uFAsB0B,qDAAM;OArBhC,sBAAsB,CAoOlC;IAAD,6BAAC;CAAA;AApOkC","file":"default~customers-customers-module~track-track-module~warehouse-warehouse-module.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Apollo } from 'apollo-angular';\nimport gql from 'graphql-tag';\nimport { Observable } from 'rxjs';\nimport { IOrderCreateInput } from '@modules/server.common/routers/IWarehouseOrdersRouter';\nimport Order from '@modules/server.common/entities/Order';\nimport { map } from 'rxjs/operators';\nimport IPagingOptions from '@modules/server.common/interfaces/IPagingOptions';\n\n@Injectable()\nexport class WarehouseOrdersService {\n\tprivate readonly _orderProductsMutation = gql`\n\t\tmutation MakeOrder($createInput: OrderCreateInput!) {\n\t\t\tcreateOrder(createInput: $createInput) {\n\t\t\t\t_id\n\t\t\t\t_createdAt\n\t\t\t\t_updatedAt\n\t\t\t\tcarrierStatus\n\t\t\t\tisConfirmed\n\t\t\t\twarehouseId\n\t\t\t\twarehouseStatus\n\t\t\t\tuser {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tcarrier {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`;\n\n\tconstructor(private readonly _apollo: Apollo) {}\n\n\tcreateOrder(createInput: IOrderCreateInput): Observable<Order> {\n\t\treturn this._apollo\n\t\t\t.mutate({\n\t\t\t\tmutation: this._orderProductsMutation,\n\t\t\t\tvariables: { createInput },\n\t\t\t})\n\t\t\t.pipe(map((result: any) => result.data.createOrder));\n\t}\n\n\tgetStoreOrdersTableData(\n\t\tstoreId: string,\n\t\tpagingOptions?: IPagingOptions,\n\t\tstatus?: string\n\t): Observable<Order[]> {\n\t\treturn this._apollo\n\t\t\t.watchQuery({\n\t\t\t\tquery: gql`\n\t\t\t\t\tquery GetStoreOrdersTableData(\n\t\t\t\t\t\t$storeId: String!\n\t\t\t\t\t\t$pagingOptions: PagingOptionsInput\n\t\t\t\t\t\t$status: String\n\t\t\t\t\t) {\n\t\t\t\t\t\tgetStoreOrdersTableData(\n\t\t\t\t\t\t\tstoreId: $storeId\n\t\t\t\t\t\t\tpagingOptions: $pagingOptions\n\t\t\t\t\t\t\tstatus: $status\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tpage\n\t\t\t\t\t\t\torders {\n\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tcarrierStatus\n\t\t\t\t\t\t\t\tcarrierStatusText\n\t\t\t\t\t\t\t\twarehouseStatusText\n\t\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\t\twarehouseStatus\n\t\t\t\t\t\t\t\tdeliveryTime\n\t\t\t\t\t\t\t\tstatus\n\t\t\t\t\t\t\t\tisConfirmed\n\t\t\t\t\t\t\t\tfinishedProcessingTime\n\t\t\t\t\t\t\t\tisCancelled\n\t\t\t\t\t\t\t\tisPaid\n\t\t\t\t\t\t\t\torderType\n\t\t\t\t\t\t\t\torderNumber\n\t\t\t\t\t\t\t\t_createdAt\n\t\t\t\t\t\t\t\twarehouseId\n\t\t\t\t\t\t\t\tuser {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\tfirstName\n\t\t\t\t\t\t\t\t\tlastName\n\t\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\t\tgeoLocation {\n\t\t\t\t\t\t\t\t\t\tstreetAddress\n\t\t\t\t\t\t\t\t\t\thouse\n\t\t\t\t\t\t\t\t\t\tpostcode\n\t\t\t\t\t\t\t\t\t\tcountryName\n\t\t\t\t\t\t\t\t\t\tcity\n\t\t\t\t\t\t\t\t\t\tloc {\n\t\t\t\t\t\t\t\t\t\t\tcoordinates\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twarehouse {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\tgeoLocation {\n\t\t\t\t\t\t\t\t\t\thouse\n\t\t\t\t\t\t\t\t\t\tpostcode\n\t\t\t\t\t\t\t\t\t\tcountryName\n\t\t\t\t\t\t\t\t\t\tcity\n\t\t\t\t\t\t\t\t\t\tloc {\n\t\t\t\t\t\t\t\t\t\t\tcoordinates\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcarrier {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tlogo\n\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\tfirstName\n\t\t\t\t\t\t\t\t\tlastName\n\t\t\t\t\t\t\t\t\tapartment\n\t\t\t\t\t\t\t\t\tphone\n\t\t\t\t\t\t\t\t\tgeoLocation {\n\t\t\t\t\t\t\t\t\t\tcity\n\t\t\t\t\t\t\t\t\t\tstreetAddress\n\t\t\t\t\t\t\t\t\t\thouse\n\t\t\t\t\t\t\t\t\t\tloc {\n\t\t\t\t\t\t\t\t\t\t\tcoordinates\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tproducts {\n\t\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\t\tprice\n\t\t\t\t\t\t\t\t\tproduct {\n\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\t\t\t\ttitle {\n\t\t\t\t\t\t\t\t\t\t\tlocale\n\t\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdescription {\n\t\t\t\t\t\t\t\t\t\t\tlocale\n\t\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdetails {\n\t\t\t\t\t\t\t\t\t\t\tlocale\n\t\t\t\t\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\timages {\n\t\t\t\t\t\t\t\t\t\t\tlocale\n\t\t\t\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t\t\t\t\twidth\n\t\t\t\t\t\t\t\t\t\t\theight\n\t\t\t\t\t\t\t\t\t\t\torientation\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t\tpollInterval: 2000,\n\t\t\t\tvariables: { storeId, pagingOptions, status },\n\t\t\t})\n\t\t\t.valueChanges.pipe(\n\t\t\t\tmap((res) => res.data['getStoreOrdersTableData'])\n\t\t\t);\n\t}\n\n\tasync getCountOfStoreOrders(storeId: string, status?: string) {\n\t\tconst res = await this._apollo\n\t\t\t.query({\n\t\t\t\tquery: gql`\n\t\t\t\t\tquery getCountOfStoreOrders(\n\t\t\t\t\t\t$storeId: String!\n\t\t\t\t\t\t$status: String!\n\t\t\t\t\t) {\n\t\t\t\t\t\tgetCountOfStoreOrders(\n\t\t\t\t\t\t\tstoreId: $storeId\n\t\t\t\t\t\t\tstatus: $status\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t\tvariables: { storeId, status },\n\t\t\t})\n\t\t\t.toPromise();\n\n\t\treturn res.data['getCountOfStoreOrders'];\n\t}\n\n\tasync removeUserOrders(storeId: string, userId: string) {\n\t\tconst res = await this._apollo\n\t\t\t.query({\n\t\t\t\tquery: gql`\n\t\t\t\t\tquery RemoveUserOrders(\n\t\t\t\t\t\t$storeId: String!\n\t\t\t\t\t\t$userId: String!\n\t\t\t\t\t) {\n\t\t\t\t\t\tremoveUserOrders(storeId: $storeId, userId: $userId) {\n\t\t\t\t\t\t\tnumber\n\t\t\t\t\t\t\tmodified\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t\tvariables: { storeId, userId },\n\t\t\t})\n\t\t\t.toPromise();\n\n\t\treturn res.data['removeUserOrders'];\n\t}\n\n\tasync getOrdersInDelivery(storeId: string) {\n\t\tconst res = await this._apollo\n\t\t\t.query({\n\t\t\t\tquery: gql`\n\t\t\t\t\tquery GetOrdersInDelivery($storeId: String!) {\n\t\t\t\t\t\tgetOrdersInDelivery(storeId: $storeId) {\n\t\t\t\t\t\t\tcarrier {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\tgeoLocation {\n\t\t\t\t\t\t\t\t\tloc {\n\t\t\t\t\t\t\t\t\t\tcoordinates\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuser {\n\t\t\t\t\t\t\t\tgeoLocation {\n\t\t\t\t\t\t\t\t\tloc {\n\t\t\t\t\t\t\t\t\t\tcoordinates\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t\tvariables: { storeId },\n\t\t\t})\n\t\t\t.toPromise();\n\n\t\treturn res.data['getOrdersInDelivery'];\n\t}\n}\n"],"sourceRoot":"webpack:///"}